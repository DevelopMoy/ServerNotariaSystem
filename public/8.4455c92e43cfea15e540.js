(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{aSMm:function(e,t,i){"use strict";i.r(t),i.d(t,"EmpleadoModule",function(){return j});var o=i("ofXK"),r=i("tyNb"),a=i("fXoL"),n=i("tk/3");let s=(()=>{class e{constructor(e){this.httpService=e,this.token="",this.endpoint="https://notariaapirest.herokuapp.com/api/notaria/tramite"}getUsers(){this.token=localStorage.getItem("tokenUser")||"";let e=new n.c;return e=e.append("authToken",this.token||""),this.httpService.get("https://notariaapirest.herokuapp.com/api/user",{headers:e})}getTramites(){const e=localStorage.getItem("tokenUser");let t=new n.c;return t=t.append("authToken",e||""),this.httpService.get(this.endpoint,{headers:t})}updateTramite(e,t,i){const o=localStorage.getItem("tokenUser");let r=new n.c;return r=r.append("authToken",o||""),this.httpService.put(this.endpoint,{idTramite:e,status:t,ultimoMovimiento:i},{headers:r})}updateUser(e){this.token=localStorage.getItem("tokenUser")||"";let t=new n.c;return t=t.append("authToken",this.token||""),this.httpService.put("https://notariaapirest.herokuapp.com/api/user",e,{headers:t})}}return e.\u0275fac=function(t){return new(t||e)(a.Xb(n.a))},e.\u0275prov=a.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var c=i("UbJi"),u=i("cQJI"),l=i("7zfz"),p=i("QIUk"),b=i("/RsI"),d=i("3Pt+"),m=i("7kUa"),h=i("jIHw");function f(e,t){if(1&e&&a.Dc(0),2&e){const e=a.dc().$implicit;a.Fc(" Fecha de Inicio: ",e.data.initDate," ")}}function g(e,t){if(1&e){const e=a.Ub();a.Tb(0,"p-button",14),a.ac("click",function(){a.vc(e);const t=a.dc().$implicit;return a.dc().actualizarDatos(t)}),a.Sb()}}function v(e,t){if(1&e){const e=a.Ub();a.Tb(0,"button",15),a.ac("click",function(){a.vc(e);const t=a.dc().$implicit;return a.dc().actualizarDatos(t)}),a.Sb()}}function S(e,t){if(1&e){const e=a.Ub();a.Tb(0,"div",2),a.Tb(1,"p-card",3),a.Bc(2,f,1,1,"ng-template",4),a.Tb(3,"h4"),a.Dc(4),a.Sb(),a.Tb(5,"h6"),a.Dc(6),a.Sb(),a.Tb(7,"p"),a.Dc(8),a.Sb(),a.Tb(9,"div",2),a.Bc(10,g,1,0,"p-button",5),a.Bc(11,v,1,0,"button",6),a.Sb(),a.Sb(),a.Sb(),a.Tb(12,"p-dialog",7),a.ac("visibleChange",function(t){return a.vc(e),a.dc().displayUpdateDialog=t}),a.Tb(13,"label",8),a.Dc(14,"Ultimo Movimiento: "),a.Sb(),a.Tb(15,"div"),a.Tb(16,"input",9),a.ac("ngModelChange",function(t){return a.vc(e),a.dc().ultimoMovimiento=t}),a.Sb(),a.Sb(),a.Tb(17,"div",10),a.Tb(18,"label",11),a.Dc(19,"Tramite Activo:"),a.Sb(),a.Tb(20,"input",12),a.ac("ngModelChange",function(t){return a.vc(e),a.dc().estadoTramite=t}),a.Sb(),a.Sb(),a.Tb(21,"div",2),a.Tb(22,"button",13),a.ac("click",function(){return a.vc(e),a.dc().accionActualiza()}),a.Sb(),a.Sb(),a.Sb()}if(2&e){const e=t.$implicit,i=a.dc();a.Cb(4),a.Fc(" Tramite: ",e.data.name,""),a.Cb(2),a.Fc("Id: ",e.id,""),a.Cb(2),a.Fc("Ultimo Movimiento: ",e.data.ultimoMovimiento,""),a.Cb(2),a.ic("ngIf",e.data.status),a.Cb(1),a.ic("ngIf",!e.data.status),a.Cb(1),a.ic("visible",i.displayUpdateDialog),a.Cb(4),a.ic("ngModel",i.ultimoMovimiento),a.Cb(4),a.ic("ngModel",i.estadoTramite)}}let T=(()=>{class e{constructor(e,t){this.empleadoService=e,this.fireAuth=t,this.tramites=[],this.tramiteSeleccionado=[],this.displayUpdateDialog=!1,this.estadoTramite=!1,this.ultimoMovimiento=""}ngOnInit(){this.updateArrayWithService()}updateArrayWithService(){this.empleadoService.getTramites().subscribe(e=>{this.fireAuth.user.subscribe(t=>{this.tramites=[],console.log(null==t?void 0:t.uid),e.forEach(e=>{(null==t?void 0:t.uid)==e.data.abogadoUID&&this.tramites.push(e)})})},e=>{console.log(e)})}actualizarDatos(e){this.estadoTramite=e.data.status,this.ultimoMovimiento=e.data.ultimoMovimiento,this.displayUpdateDialog=!0,this.tramiteActual=e}accionActualiza(){var e;this.empleadoService.updateTramite((null===(e=this.tramiteActual)||void 0===e?void 0:e.id)||"",this.estadoTramite,this.ultimoMovimiento).subscribe(e=>{this.updateArrayWithService(),this.displayUpdateDialog=!1},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(s),a.Nb(c.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-dashboard"]],decls:2,vars:3,consts:[[1,"",3,"value","dragdrop","selection","selectionChange"],["pTemplate","item"],[1,"contenedorCarta"],[2,"width","70%"],["class","carta","pTemplate","header"],["label","Actualizar / Finalizar Tramite","icon","pi pi-check",3,"click",4,"ngIf"],["pButton","","class","p-button-danger","label","Actualizar / Re-abrir Tramite","icon","pi pi-times",3,"click",4,"ngIf"],["header","Actualizar Tramite",3,"visible","visibleChange"],["for","float-input"],["id","float-input","pInputText","","type","text",3,"ngModel","ngModelChange"],[1,"p-field-checkbox","carta"],["for","ny"],["type","checkbox","id","ny",3,"ngModel","ngModelChange"],["pButton","","type","button","label","Actualizar Tramite",3,"click"],["label","Actualizar / Finalizar Tramite","icon","pi pi-check",3,"click"],["pButton","","label","Actualizar / Re-abrir Tramite","icon","pi pi-times",1,"p-button-danger",3,"click"]],template:function(e,t){1&e&&(a.Tb(0,"p-orderList",0),a.ac("selectionChange",function(e){return t.tramiteSeleccionado=e}),a.Bc(1,S,23,8,"ng-template",1),a.Sb()),2&e&&a.ic("value",t.tramites)("dragdrop",!0)("selection",t.tramiteSeleccionado)},directives:[u.a,l.h,p.a,o.j,b.a,d.b,m.a,d.k,d.n,d.a,h.b,h.a],styles:[".contenedorCarta[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:center;align-content:center}.carta[_ngcontent-%COMP%]{margin-top:5%}"]}),e})();var k=i("mrSG"),I=i("b1Ni");let y=(()=>{class e{constructor(e,t,i){this.fireAuth=e,this.router=t,this.userService=i,this.user={name:"",phone:"",UID:""}}logout(){this.fireAuth.signOut().then(()=>{localStorage.removeItem("tokenUser"),this.router.navigate(["./home"])})}verificarSesion(){return Object(k.__awaiter)(this,void 0,void 0,function*(){yield this.userService.getUsers().subscribe(e=>{this.fireAuth.user.subscribe(t=>{for(let i of e.users)if(i.UID===(null==t?void 0:t.uid)){this.user.UID=i.UID||" ",this.user.name=i.name,this.user.phone=i.phone;break}this.items=[{label:`Mi cuenta - ${this.user.name}`,icon:"pi pi-user",items:[{label:"Inicio",icon:"pi pi-home",routerLink:"./dashboard"},{label:"Editar",icon:"pi pi-user-edit",routerLink:"./editUser"}]}]})})})}ngOnInit(){this.verificarSesion(),this.userService.getUsers().subscribe(console.log)}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(c.a),a.Nb(r.b),a.Nb(s))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-menu-user"]],decls:2,vars:1,consts:[[1,"p-m-6",3,"model"],["pButton","","label","Logout","icon","pi pi-power-off",3,"click"]],template:function(e,t){1&e&&(a.Tb(0,"p-menubar",0),a.Tb(1,"button",1),a.ac("click",function(){return t.logout()}),a.Sb(),a.Sb()),2&e&&a.ic("model",t.items)},directives:[I.a,h.b],styles:[""]}),e})(),U=(()=>{class e{constructor(e){this.router=e}ngOnInit(){}logout(){}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(r.b))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-home"]],decls:2,vars:0,template:function(e,t){1&e&&(a.Ob(0,"app-menu-user"),a.Ob(1,"router-outlet"))},directives:[y,r.g],styles:[""]}),e})();var D=i("dts7");function C(e,t){1&e&&(a.Tb(0,"small",11),a.Dc(1,"Nombre requerido."),a.Sb())}function A(e,t){if(1&e&&(a.Tb(0,"small",11),a.Dc(1),a.Sb()),2&e){const e=a.dc();a.Cb(1),a.Fc(" ",e.phoneErrorMsg," ")}}const M=function(){return{"margin-bottom":"2em"}},w=[{path:"",component:U,children:[{path:"dashboard",component:T},{path:"editUser",component:(()=>{class e{constructor(e,t,i){this.fb=e,this.fireAuth=t,this.userService=i,this.msgs1=[],this.verMensaje=!1,this.miFormulario=this.fb.group({name:["",d.p.required],UID:[""],phone:["",[d.p.required,d.p.minLength(10),d.p.pattern("^[0-9]*$")]]}),this.user={name:"",phone:"",UID:""}}ngOnInit(){this.verificarSesion()}get phoneErrorMsg(){var e;const t=null===(e=this.miFormulario.get("phone"))||void 0===e?void 0:e.errors;return(null==t?void 0:t.required)?"Telefono obligatorio":(null==t?void 0:t.pattern)?"El telefono debe contener solo n\xfameros":(null==t?void 0:t.minlength)||(null==t?void 0:t.maxlenght)?"N\xfamero debe contener 10 d\xedgitos: LADA + Num.":""}submitForm(){var e;this.miFormulario.markAllAsTouched(),this.miFormulario.valid&&(this.user.name=(null===(e=this.miFormulario.get("name"))||void 0===e?void 0:e.value)||"",this.userService.updateUser(this.user).subscribe(e=>{this.msgs1=[{severity:"success",summary:"Success",detail:`Usuario ${this.user.name} ha sido actualizado con exito`}],this.verMensaje=!0}))}campoEsValido(e){return this.miFormulario.controls[e].errors&&this.miFormulario.controls[e].touched}verificarSesion(){return Object(k.__awaiter)(this,void 0,void 0,function*(){yield this.userService.getUsers().subscribe(e=>{this.fireAuth.user.subscribe(t=>{for(let i of e.users)if(i.UID===(null==t?void 0:t.uid)){this.user.UID=i.UID||" ",this.user.name=i.name,this.user.phone=i.phone,this.setForm();break}})})})}setForm(){this.miFormulario.reset({name:this.user.name,phone:this.user.phone})}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(d.c),a.Nb(c.a),a.Nb(s))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-edit-user"]],decls:18,vars:8,consts:[[3,"value","enableService","valueChange"],[1,"p-container","p-p-2"],[1,"p-col-10","p-offset-1"],[1,"text-layout"],[1,"p-fluid","p-formgrid","p-grid",3,"formGroup","ngSubmit"],[1,"p-field","p-col-12"],["for","firstname2",1,"text-layout"],["placeholder","Ingresa email","type","text","pInputText","","formControlName","name",1,"p-inputtext"],["id","username2-help","class","p-error",4,"ngIf"],["placeholder","Ingresa n\xfamero telef\xf3nico","type","text","formControlName","phone","pInputText","",1,"p-inputtext"],["pButton","","label","Actualizar datos","type","submit"],["id","username2-help",1,"p-error"]],template:function(e,t){1&e&&(a.Tb(0,"p-messages",0),a.ac("valueChange",function(e){return t.msgs1=e}),a.Sb(),a.Tb(1,"div",1),a.Tb(2,"div",2),a.Tb(3,"h1",3),a.Dc(4,"Editar Usuario"),a.Sb(),a.Tb(5,"p-card"),a.Tb(6,"form",4),a.ac("ngSubmit",function(){return t.submitForm()}),a.Tb(7,"div",5),a.Tb(8,"label",6),a.Dc(9,"Nombre:"),a.Sb(),a.Ob(10,"input",7),a.Bc(11,C,2,0,"small",8),a.Sb(),a.Tb(12,"div",5),a.Tb(13,"label",3),a.Dc(14,"Telefono"),a.Sb(),a.Ob(15,"input",9),a.Bc(16,A,2,1,"small",8),a.Sb(),a.Ob(17,"button",10),a.Sb(),a.Sb(),a.Sb(),a.Sb()),2&e&&(a.ic("value",t.msgs1)("enableService",t.verMensaje),a.Cb(5),a.zc(a.kc(7,M)),a.Cb(1),a.ic("formGroup",t.miFormulario),a.Cb(5),a.ic("ngIf",t.campoEsValido("name")),a.Cb(5),a.ic("ngIf",t.campoEsValido("phone")))},directives:[D.a,p.a,d.q,d.l,d.g,d.b,m.a,d.k,d.e,o.j,h.b],styles:[""]}),e})()},{path:"**",redirectTo:"dashboard"}]}];let F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({imports:[[r.f.forChild(w)],r.f]}),e})();var z=i("xcFZ"),N=i("PCNd"),x=i("spgP");const O={apiKey:"AIzaSyDUgq63WqudGUS1CqHfLRvEb2ogj6sV9KA",authDomain:"proyectonotaria.firebaseapp.com",projectId:"proyectonotaria",storageBucket:"proyectonotaria.appspot.com",messagingSenderId:"725211129961",appId:"1:725211129961:web:b2cdf14ef5cf50206e9af8",measurementId:"G-ES40Q9CJTD"};let j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({imports:[[o.b,F,z.a,N.a,x.a.initializeApp(O),c.b,n.b,d.h,d.o]]}),e})()}}]);