(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Yj9t:function(e,i,o){"use strict";o.r(i),o.d(i,"AuthModule",function(){return B});var t=o("ofXK"),r=o("tyNb"),a=o("3Pt+"),n=o("JZFu"),l=o("fXoL"),s=o("UbJi"),u=o("o66f"),c=o("N/25"),p=o("QIUk"),m=o("7kUa"),b=o("LuMj"),d=o("jIHw"),h=o("/RsI"),g=o("7zfz");function f(e,i){1&e&&(l.Tb(0,"small",23),l.Dc(1,"Usuario Invalido"),l.Sb())}function v(e,i){if(1&e&&(l.Tb(0,"small",23),l.Dc(1),l.Sb()),2&e){const e=l.dc();l.Cb(1),l.Ec(e.emailErrorMsg)}}function S(e,i){if(1&e&&(l.Tb(0,"small",23),l.Dc(1),l.Sb()),2&e){const e=l.dc();l.Cb(1),l.Fc(" ",e.phoneErrorMsg," ")}}function I(e,i){1&e&&(l.Tb(0,"small",24),l.Dc(1," La contrase\xf1a debe de ser mayor de 6 caracteres. "),l.Sb())}function T(e,i){1&e&&(l.Tb(0,"small",24),l.Dc(1," Las contrase\xf1as deben de ser iguales "),l.Sb())}function y(e,i){1&e&&l.Dc(0," Ingresa codigo que recibi\xf3 en su smartphone: ")}const C=function(){return{"margin-bottom":"2em"}},w=function(){return{width:"50vw"}};function A(e,i){1&e&&(l.Tb(0,"div",3),l.Tb(1,"label",16),l.Dc(2,"Coreo electronico"),l.Sb(),l.Ob(3,"input",17),l.Sb())}function D(e,i){1&e&&(l.Tb(0,"div",3),l.Tb(1,"label",1),l.Dc(2,"Telefono"),l.Sb(),l.Ob(3,"input",18),l.Sb())}function E(e,i){1&e&&(l.Tb(0,"div",3),l.Tb(1,"label",1),l.Dc(2,"Ingresa contrase\xf1a"),l.Sb(),l.Ob(3,"input",19),l.Sb())}function F(e,i){1&e&&l.Dc(0," Ingresa codigo que recibi\xf3 en su smartphone: ")}const x=function(){return{width:"95%","margin-bottom":"2em"}},R=function(){return{width:"50vw"}},N=[{path:"",children:[{path:"register",component:(()=>{class e{constructor(e,i,o,t,r){this.fb=e,this.fireAuth=i,this.win=o,this.authService=t,this.router=r,this.alertVisible=!1,this.labelStatus="Telefono",this.codigoFormulario="",this.uid="",this.miFormulario=this.fb.group({name:["",[a.p.required,a.p.minLength(5)]],email:["",[a.p.required,a.p.min(0),a.p.email]],phone:["",[a.p.required,a.p.minLength(10),a.p.maxLength(10),a.p.pattern("^[0-9]*$")]],pass:["",[a.p.required,a.p.minLength(6)]],pass1:["",[a.p.required]],type:["phone",a.p.required]},{validators:[this.camposIguales("pass","pass1")]}),this.codeVerification="",this.usuario={name:"",email:"",phone:"",role:"USER"}}ngOnInit(){n.a.initializeApp({apiKey:"AIzaSyDUgq63WqudGUS1CqHfLRvEb2ogj6sV9KA",authDomain:"proyectonotaria.firebaseapp.com",projectId:"proyectonotaria",storageBucket:"proyectonotaria.appspot.com",messagingSenderId:"725211129961",appId:"1:725211129961:web:b2cdf14ef5cf50206e9af8",measurementId:"G-ES40Q9CJTD"}),this.windowRef=this.win.windowRef,this.windowRef.recaptchaVerifier=new n.a.auth.RecaptchaVerifier("recaptcha-container"),this.windowRef.recaptchaVerifier.render()}enviarSms(){var e;this.fireAuth.signInWithPhoneNumber(`+52${null===(e=this.miFormulario.get("phone"))||void 0===e?void 0:e.value}`,this.windowRef.recaptchaVerifier).then(e=>{this.confirmationResult=e}).catch(e=>{}),this.alertVisible=!0}get emailErrorMsg(){var e;const i=null===(e=this.miFormulario.get("email"))||void 0===e?void 0:e.errors;return(null==i?void 0:i.required)?"Email obligatorio":(null==i?void 0:i.email)?"Valor ingresado no tiene formato de correo":""}get phoneErrorMsg(){var e;const i=null===(e=this.miFormulario.get("phone"))||void 0===e?void 0:e.errors;return(null==i?void 0:i.required)?"Telefono obligatorio":(null==i?void 0:i.pattern)?"El telefono debe contener solo n\xfameros":(null==i?void 0:i.minlength)||(null==i?void 0:i.maxlenght)?"N\xfamero debe contener 10 d\xedgitos: LADA + Num.":""}campoEsValido(e){return this.miFormulario.controls[e].errors&&this.miFormulario.controls[e].touched}submitForm(){var e,i,o,t,r,a,n;this.miFormulario.markAllAsTouched(),this.miFormulario.valid?(this.usuario.name=null===(e=this.miFormulario.get("name"))||void 0===e?void 0:e.value,this.usuario.email=null===(i=this.miFormulario.get("email"))||void 0===i?void 0:i.value,this.usuario.phone=null===(o=this.miFormulario.get("phone"))||void 0===o?void 0:o.value,console.log("succes"),console.log(this.miFormulario.value),"email"===(null===(t=this.miFormulario.get("type"))||void 0===t?void 0:t.value)?this.fireAuth.createUserWithEmailAndPassword(null===(r=this.miFormulario.get("email"))||void 0===r?void 0:r.value,null===(a=this.miFormulario.get("pass"))||void 0===a?void 0:a.value).then(e=>{var i;this.usuario.UID=null===(i=e.user)||void 0===i?void 0:i.uid,this.authService.agregarUser(this.usuario).subscribe(e=>{this.authService.login({UID:`${this.usuario.UID}`}).subscribe(e=>{localStorage.setItem("tokenUser",e.token),this.router.navigate(["./user"])})},e=>{this.fireAuth.signOut().then()})}):"phone"===(null===(n=this.miFormulario.get("type"))||void 0===n?void 0:n.value)&&this.enviarSms()):(console.log("no succes"),console.log(this.miFormulario))}camposIguales(e,i){return o=>{var t,r,a,n;return(null===(t=o.get(e))||void 0===t?void 0:t.value)!==(null===(r=o.get(i))||void 0===r?void 0:r.value)?(null===(a=o.get(i))||void 0===a||a.setErrors({noIguales:!0}),{noIguales:!0}):(null===(n=o.get(i))||void 0===n||n.setErrors(null),null)}}verificarCode(){this.confirmationResult.confirm(this.codeVerification).then(e=>{var i;console.log(e),this.usuario.UID=null===(i=e.user)||void 0===i?void 0:i.uid,this.authService.agregarUser(this.usuario).subscribe(e=>{console.log(e),this.authService.login({UID:`${this.usuario.UID}`}).subscribe(e=>{localStorage.setItem("tokenUser",e.token),this.router.navigate(["./user"])})},e=>{this.fireAuth.signOut().then()})}).catch(e=>{console.log("HA OCURRIDO UN ERROR AL LOGEAR")})}}return e.\u0275fac=function(i){return new(i||e)(l.Nb(a.c),l.Nb(s.a),l.Nb(u.a),l.Nb(c.a),l.Nb(r.b))},e.\u0275cmp=l.Hb({type:e,selectors:[["app-resgiter"]],decls:45,vars:14,consts:[[1,"p-col-10","p-offset-1"],[1,"text-layout"],[1,"p-fluid","p-formgrid","p-grid",3,"formGroup","ngSubmit"],[1,"p-field","p-col-12"],["for","firstname2",1,"text-layout"],["type","text","pInputText","","placeholder","Nombre de ususario","formControlName","name",1,"p-inputtext"],["id","username2-help","class","p-error",4,"ngIf"],["placeholder","Ingresa email","type","email","pInputText","","formControlName","email",1,"p-inputtext"],["placeholder","Ingresa n\xfamero telef\xf3nico","type","text","formControlName","phone","pInputText","",1,"p-inputtext"],["placeholder","Password","type","password","pInputText","","formControlName","pass",1,"p-inputtext"],["class","p-error",4,"ngIf"],[1,"p-field","p-col"],["placeholder","Confirmar","type","password","formControlName","pass1","pInputText","",1,"p-inputtext"],["for","firstname2",1,"text-layout","p-mb-4"],["name","type","label","Telefono","value","phone","formControlName","type",1,"text-layout"],["name","type","label","Email","value","email","formControlName","type",1,"text-layout"],["id","recaptcha-container",1,"p-field","p-col-5"],["pButton","","label","Registrar","type","submit"],[3,"visible","visibleChange"],["pTemplate","header"],[3,"ngSubmit"],["placeholder","C\xf3digo","type","text","pInputText","","name","code",1,"p-inputtext",3,"ngModel","ngModelChange"],["pButton","","type","submit"],["id","username2-help",1,"p-error"],[1,"p-error"]],template:function(e,i){1&e&&(l.Tb(0,"div",0),l.Tb(1,"h1",1),l.Dc(2,"Registrar Usuario"),l.Sb(),l.Tb(3,"p-card"),l.Tb(4,"form",2),l.ac("ngSubmit",function(){return i.submitForm()}),l.Tb(5,"div",3),l.Tb(6,"label",4),l.Dc(7,"Nombre Completo"),l.Sb(),l.Ob(8,"input",5),l.Bc(9,f,2,0,"small",6),l.Sb(),l.Tb(10,"div",3),l.Tb(11,"label",4),l.Dc(12,"Coreo electronico"),l.Sb(),l.Ob(13,"input",7),l.Bc(14,v,2,1,"small",6),l.Sb(),l.Tb(15,"div",3),l.Tb(16,"label",1),l.Dc(17,"Telefono"),l.Sb(),l.Ob(18,"input",8),l.Bc(19,S,2,1,"small",6),l.Sb(),l.Tb(20,"div",3),l.Tb(21,"label",1),l.Dc(22,"Ingresa contrase\xf1a"),l.Sb(),l.Ob(23,"input",9),l.Bc(24,I,2,0,"small",10),l.Sb(),l.Tb(25,"div",11),l.Tb(26,"label",1),l.Dc(27,"Confirme la contrase\xf1a"),l.Sb(),l.Ob(28,"input",12),l.Bc(29,T,2,0,"small",10),l.Sb(),l.Tb(30,"div",3),l.Tb(31,"label",13),l.Dc(32,"Seleccione autenticaci\xf3n:"),l.Sb(),l.Tb(33,"div",11),l.Ob(34,"p-radioButton",14),l.Sb(),l.Tb(35,"div",11),l.Ob(36,"p-radioButton",15),l.Sb(),l.Sb(),l.Ob(37,"div",16),l.Ob(38,"button",17),l.Sb(),l.Sb(),l.Tb(39,"p-dialog",18),l.ac("visibleChange",function(e){return i.alertVisible=e}),l.Bc(40,y,1,0,"ng-template",19),l.Tb(41,"form",20),l.ac("ngSubmit",function(){return i.verificarCode()}),l.Tb(42,"input",21),l.ac("ngModelChange",function(e){return i.codeVerification=e}),l.Sb(),l.Tb(43,"button",22),l.Dc(44,"Enviar"),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.Cb(3),l.zc(l.kc(12,C)),l.Cb(1),l.ic("formGroup",i.miFormulario),l.Cb(5),l.ic("ngIf",i.campoEsValido("name")),l.Cb(5),l.ic("ngIf",i.campoEsValido("email")),l.Cb(5),l.ic("ngIf",i.campoEsValido("phone")),l.Cb(5),l.ic("ngIf",i.campoEsValido("pass")),l.Cb(5),l.ic("ngIf",i.campoEsValido("pass1")),l.Cb(10),l.zc(l.kc(13,w)),l.ic("visible",i.alertVisible),l.Cb(3),l.ic("ngModel",i.codeVerification))},directives:[p.a,a.q,a.l,a.g,a.b,m.a,a.k,a.e,t.j,b.a,d.b,h.a,g.h,a.m,a.n],styles:[""]}),e})()},{path:"login",component:(()=>{class e{constructor(e,i,o,t,r){this.fb=e,this.fireAuth=i,this.win=o,this.authService=t,this.router=r,this.codigoFormulario="",this.uid="",this.alertVisible=!1,this.typeAuth="phone",this.codeVerification="",this.miFormulario=this.fb.group({email:[""],phone:[""],pass:[""],type:["phone",a.p.required]}),this.usuario={name:"",email:"",phone:"",role:"USER"}}ngOnInit(){var e;null===(e=this.miFormulario.get("type"))||void 0===e||e.valueChanges.subscribe(e=>this.typeAuth=e),n.a.initializeApp({apiKey:"AIzaSyDUgq63WqudGUS1CqHfLRvEb2ogj6sV9KA",authDomain:"proyectonotaria.firebaseapp.com",projectId:"proyectonotaria",storageBucket:"proyectonotaria.appspot.com",messagingSenderId:"725211129961",appId:"1:725211129961:web:b2cdf14ef5cf50206e9af8",measurementId:"G-ES40Q9CJTD"}),this.windowRef=this.win.windowRef,this.windowRef.recaptchaVerifier=new n.a.auth.RecaptchaVerifier("recaptcha-container"),this.windowRef.recaptchaVerifier.render()}get emailErrorMsg(){var e;const i=null===(e=this.miFormulario.get("email"))||void 0===e?void 0:e.errors;return(null==i?void 0:i.required)?"Email obligatorio":(null==i?void 0:i.email)?"Valor ingresado no tiene formato de correo":""}get phoneErrorMsg(){var e;const i=null===(e=this.miFormulario.get("phone"))||void 0===e?void 0:e.errors;return(null==i?void 0:i.required)?"Telefono obligatorio":(null==i?void 0:i.pattern)?"El telefono debe contener solo n\xfameros":(null==i?void 0:i.minlength)||(null==i?void 0:i.maxlenght)?"N\xfamero debe contener 10 d\xedgitos: LADA + Num.":""}campoEsValido(e){return this.miFormulario.controls[e].errors&&this.miFormulario.controls[e].touched}submitForm(){var e,i;this.miFormulario.markAllAsTouched(),console.log(this.miFormulario.valid),this.miFormulario.valid&&("email"===this.typeAuth?this.fireAuth.signInWithEmailAndPassword(null===(e=this.miFormulario.get("email"))||void 0===e?void 0:e.value,null===(i=this.miFormulario.get("pass"))||void 0===i?void 0:i.value).then(e=>{var i;this.authService.login({UID:`${null===(i=e.user)||void 0===i?void 0:i.uid}`}).subscribe(e=>{localStorage.setItem("tokenUser",e.token),this.fireAuth.user.subscribe(console.log),"USER"===e.role?this.router.navigate(["./user"]):"ADMIN"===e.role&&this.router.navigate(["./admin"])})}):"phone"===this.typeAuth?this.enviarSms():console.log("nosucces"))}enviarSms(){var e;this.fireAuth.signInWithPhoneNumber(`+52${null===(e=this.miFormulario.get("phone"))||void 0===e?void 0:e.value}`,this.windowRef.recaptchaVerifier).then(e=>{this.confirmationResult=e}).catch(e=>{}),this.alertVisible=!0}verificarCode(){this.confirmationResult.confirm(this.codeVerification).then(e=>{var i;console.log(e),this.usuario.UID=null===(i=e.user)||void 0===i?void 0:i.uid,this.authService.login({UID:`${this.usuario.UID}`}).subscribe(e=>{console.log("Rol usuer log"+e.role),localStorage.setItem("tokenUser",e.token),this.fireAuth.user.subscribe(console.log),"USER"===e.role?this.router.navigate(["./user"]):"ADMIN"===e.role&&this.router.navigate(["./admin"])},e=>{this.fireAuth.signOut().then(e=>{this.router.navigate(["./home"])})})}).catch(e=>{console.log("HA OCURRIDO UN ERROR AL LOGEAR")})}}return e.\u0275fac=function(i){return new(i||e)(l.Nb(a.c),l.Nb(s.a),l.Nb(u.a),l.Nb(c.a),l.Nb(r.b))},e.\u0275cmp=l.Hb({type:e,selectors:[["app-login"]],decls:23,vars:12,consts:[[1,"p-col-12"],[1,"text-layout"],[1,"p-fluid","p-formgrid","p-grid",3,"formGroup","ngSubmit"],[1,"p-field","p-col-12"],["for","firstname2",1,"text-layout","p-mb-4"],[1,"p-field","p-col"],["name","type","label","Telefono","value","phone","formControlName","type",1,"text-layout"],["name","type","label","Email","value","email","formControlName","type",1,"text-layout"],["class","p-field p-col-12",4,"ngIf"],["id","recaptcha-container",1,"p-field","p-col-12"],["pButton","","label","Iniciar Sesion","type","submit"],[3,"visible","visibleChange"],["pTemplate","header"],[3,"ngSubmit"],["placeholder","C\xf3digo","type","text","pInputText","","name","code",1,"p-inputtext",3,"ngModel","ngModelChange"],["pButton","","type","submit"],["for","firstname2",1,"text-layout"],["placeholder","Ingresa email","type","email","pInputText","","formControlName","email",1,"p-inputtext"],["placeholder","Ingresa n\xfamero telef\xf3nico","type","text","formControlName","phone","pInputText","",1,"p-inputtext"],["placeholder","Password","type","password","pInputText","","formControlName","pass",1,"p-inputtext"]],template:function(e,i){1&e&&(l.Tb(0,"div",0),l.Tb(1,"h1",1),l.Dc(2,"Iniciar sesi\xf3n"),l.Sb(),l.Tb(3,"p-card"),l.Tb(4,"form",2),l.ac("ngSubmit",function(){return i.submitForm()}),l.Tb(5,"div",3),l.Tb(6,"label",4),l.Dc(7,"Seleccione autenticaci\xf3n:"),l.Sb(),l.Tb(8,"div",5),l.Ob(9,"p-radioButton",6),l.Sb(),l.Tb(10,"div",5),l.Ob(11,"p-radioButton",7),l.Sb(),l.Sb(),l.Bc(12,A,4,0,"div",8),l.Bc(13,D,4,0,"div",8),l.Bc(14,E,4,0,"div",8),l.Ob(15,"div",9),l.Ob(16,"button",10),l.Sb(),l.Sb(),l.Tb(17,"p-dialog",11),l.ac("visibleChange",function(e){return i.alertVisible=e}),l.Bc(18,F,1,0,"ng-template",12),l.Tb(19,"form",13),l.ac("ngSubmit",function(){return i.verificarCode()}),l.Tb(20,"input",14),l.ac("ngModelChange",function(e){return i.codeVerification=e}),l.Sb(),l.Tb(21,"button",15),l.Dc(22,"Enviar"),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.Cb(3),l.zc(l.kc(10,x)),l.Cb(1),l.ic("formGroup",i.miFormulario),l.Cb(8),l.ic("ngIf","email"===i.typeAuth),l.Cb(1),l.ic("ngIf","phone"===i.typeAuth),l.Cb(1),l.ic("ngIf","email"===i.typeAuth),l.Cb(3),l.zc(l.kc(11,R)),l.ic("visible",i.alertVisible),l.Cb(3),l.ic("ngModel",i.codeVerification))},directives:[p.a,a.q,a.l,a.g,b.a,a.k,a.e,t.j,d.b,h.a,g.h,a.m,a.b,m.a,a.n],styles:[""]}),e})()},{path:"**",redirectTo:"login"}]}];let U=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=l.Lb({type:e}),e.\u0275inj=l.Kb({imports:[[r.f.forChild(N)],r.f]}),e})();var V=o("xcFZ"),O=o("PCNd"),q=o("spgP");const k={apiKey:"AIzaSyDUgq63WqudGUS1CqHfLRvEb2ogj6sV9KA",authDomain:"proyectonotaria.firebaseapp.com",projectId:"proyectonotaria",storageBucket:"proyectonotaria.appspot.com",messagingSenderId:"725211129961",appId:"1:725211129961:web:b2cdf14ef5cf50206e9af8",measurementId:"G-ES40Q9CJTD"};let B=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=l.Lb({type:e}),e.\u0275inj=l.Kb({imports:[[t.b,U,V.a,O.a,a.h,a.o,q.a.initializeApp(k),s.b]]}),e})()}}]);